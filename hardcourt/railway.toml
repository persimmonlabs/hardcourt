[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "./server"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"

[[services]]
name = "backend"
path = "backend"
dockerfile = "../Dockerfile" # Pointing to root Dockerfile

[[services]]
name = "frontend"
path = "frontend"
builder = "NIXPACKS" # Railway handles Next.js automatically with Nixpacks
buildCommand = "npm run build"
startCommand = "npm start"
